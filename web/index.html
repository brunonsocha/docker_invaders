<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker Invaders</title>
    <link rel="stylesheet" href="/static/style.css?v=2">
</head>
<body>

<main>
    <header>
        <div class="title-group">
            <h1>DOCKER_INVADERS<span class="cursor">_</span></h1>
        </div>
        <div class="sys-status">
            <span style="color: var(--dim);">STATUS:</span> 
            <span style="color: var(--success);">ONLINE</span>
        </div>
    </header>

    <section class="hud-grid">
        <div class="hud-item">
            <span class="hud-label">LIVES</span>
            <span class="hud-value" id="livesVal">3</span>
        </div>
        <div class="hud-item">
            <span class="hud-label">REMAINING</span>
            <span class="hud-value" id="targetsVal">0/3</span>
        </div>
    </section>

    <div class="canvas-container">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
    </div>

    <div class="console-log" id="consoleLog">
        <span class="console-title">// SYSTEM_LOGS</span>
        <div class="log-entry">
            <span class="log-time">[00:00:00]</span> 
            <span class="log-msg">Waiting for Docker Socket...</span>
        </div>
    </div>
    <div id="welcomeScreen" class="overlay">
        <div class="menu-box">
            <h1>DOCKER INVADERS</h1>
            <p style="color: var(--fg); margin-bottom: 2rem; font-size: 0.9rem;">
                ENVIRONMENT TESTER FORK<br>
            </p>
            <button id="enterBtn">START</button>
        </div>
    </div>

    <div id="menuScreen" class="overlay hidden">
        <div class="menu-box">
            <h1>SETTINGS</h1>
            <div class="input-group">
                <label>SELECT WEAPON</label>
                <select id="weaponSelect">
                    <option value="SIGKILL">SIGKILL</option>
                    <option value="SIGSEGV">SIGSEGV</option>
                    <option value="SIGTERM">SIGTERM</option>
                </select>
            </div>
            <div class="input-group">
                <label>TOTAL ITERATIONS</label>
                <input type="number" id="iterInput" value="5" min="1" max="50">
            </div>
            <button id="startBtn">START</button>
        </div>
    </div>
    <div id="loadingScreen" class="overlay hidden">
        <div class="menu-box">
        <h1>LOADING STATS</h1>
        <div class="loading-spinner">
            <div class="spinner-bar"></div>
        </div>
        <p style="color: var(--dim); margin-top: 1rem; font-size: 0.8rem;">
                WAITING FOR CONTAINER RECOVERY...
            </p>
        </div>
    </div>
    <div id="victoryScreen" class="overlay hidden">
        <div class="msg-box success" style="width: 600px;">
            <h1>MISSION COMPLETE</h1>
            
            <div class="stats-container">
                <div class="stat-row header">
                    <span>CONTAINER</span>
                    <span>STATUS</span>
                    <span>RECOVERY</span>
                </div>
                <div id="statsList" class="stats-list"></div>
            </div>

            <div class="summary-grid">
                <div>
                    <span class="label">AVG RECOVERY</span>
                    <span class="val" id="avgTime">--</span>
                </div>
                <div>
                    <span class="label">SLOWEST</span>
                    <span class="val" id="slowestContainer">--</span>
                </div>
            </div>

            <div class="btn-group">
                <button onclick="downloadCSV()">DOWNLOAD CSV</button>
                <button onclick="location.reload()" style="background: transparent; border: 1px solid var(--success); color: var(--success);">RESTART</button>
            </div>
        </div>
    </div>
    <div id="defeatScreen" class="hidden">
        <h1>403 Forbidden</h1>
        <hr>
        <p>nginx/1.18.0 (Ubuntu)</p>
    </div>

</main>

<script type="module" src="/static/game.js"></script>

</body>
</html>
